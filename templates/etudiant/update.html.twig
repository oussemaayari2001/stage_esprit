{% extends 'index.html.twig' %}
{% block body %}
  
    <div class="container d-flex justify-content-center align-items-center w-100 h-100" style="margin-left: 200px;">
        <div class="card p-4 shadow-lg" style="width: 100%; max-width: 800px;">
            <div class="card-body d-flex flex-column">
                <div class="content p-4">
                    <h1 class="card-title text-center">Partie {{ step }}</h1>

                    <!-- Progress bar -->
                    <div class="progress mb-4" style="height: 30px;">
                        <div class="progress-bar" role="progressbar" style="width: {{ (step / 6) * 100 }}%;" aria-valuenow="{{ step }}" aria-valuemin="1" aria-valuemax="6">
                            <p style="color: #fff; font-weight:bold;margin-top:15px">{{ step }} / 6</p>
                        </div>
                    </div>

                    {{ form_start(form) }}
                    <div class="form-row" >
                        {% set col_count = 0 %}
                        {% for child in form %}
                            {% if child.vars.id not in ['etudiantform1__token', 'etudiantform2__token','etudiantform3__token','etudiantform4__token','etudiantform5__token','etudiantform6__token'] %}
                                {% if col_count == 0 %}
                                    <div class="col-md-6">
                                {% endif %}
                                
                                <div class="form-group mb-4">
                                    <label for="{{ child.vars.id }}" style="margin-left: 18%;">{{ form_label(child) }}</label>
                                    {{ form_widget(child, {'attr': {'class': 'form-control' ~ (form_errors(child) ? ' is-invalid' : '') ~ ' my-custom-class', 'style': ' margin-left:15%;'}}) }}
                                </div>
                                
                                {% set col_count = col_count + 1 %}
                                {% if col_count == 5 %}
                                    </div>
                                    {% set col_count = 0 %}
                                {% endif %}
                            {% else %}
                                {{ form_widget(child) }}
                            {% endif %}
                        {% endfor %}
                        {% if col_count != 0 %}
                            </div>
                        {% endif %}
                    </div>

                    <!-- Display current photo -->
                    {% if step == 5 and currentPhoto %}
                        <div class="current-photo mb-4 text-center">
                            <h5>Photo actuelle:</h5>
                            <img src="{{ asset('uploads/photos/' ~ currentPhoto) }}" alt="Photo actuelle" style="max-width: 150px; margin-bottom: 10px;">
                        </div>
                    {% endif %}
                    
                    <div class="d-flex justify-content-between mt-4">
                        {% if step > 1 %}
                            <a href="{{ path('app_etudiant_edit', {'step': step - 1, 'id': id}) }}" class="btn btn-secondary">Previous</a>

                        {% endif %}
                        <button type="submit" style="border-color:white;color:white;background-color: #dc3545;height:40px;width:80px">Suivant</button>
                    </div>
                    
                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>

    <style>
        .container {
            background: #f8f9fa;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .card {
            background: #fff;
            border-radius: 8px;
            max-width: 800px;
            margin-top: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }

        .content {
            width: 100%;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .form-control {
            margin-bottom: 1rem;
            padding: 10px;
        }

        .invalid-feedback {
            color: #dc3545;
        }

        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
        }

        .btn-secondary {
            background-color: #6c757d;
            border-color: #6c757d;
        }

        .btn {
            padding: 10px 20px;
            font-size: 1rem;
        }

        .sidebar-link {
            text-decoration: none;
        }

        .progress {
            height: 20px;
            background-color: #fff;
            border-radius: 5px;
        }

        .progress-bar {
            background-color: #dc3545;
            transition: width 0.6s ease;
        }
    </style>
{% endblock %}
